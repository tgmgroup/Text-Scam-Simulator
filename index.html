<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Scam Town â€” Phone Challenge</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<style>
			body {
				margin: 0;
				background: #020617;
				font-family: system-ui, sans-serif;
				display: flex;
				align-items: center;
				justify-content: center;
				height: 100vh;
				color: white;
			}

			/* ===== MODAL ===== */
			#modal {
				background: rgba(0, 0, 0, 0.7);
				position: fixed;
				inset: 0;
				display: flex;
				align-items: center;
				justify-content: center;
			}

			#phone {
				width: 360px;
				height: 640px;
				background: #020617;
				border-radius: 28px;
				box-shadow: 0 20px 70px rgba(0, 0, 0, 0.7);
				overflow: hidden;
			}

			/* ===== STATUS BAR ===== */
			#status {
				display: flex;
				justify-content: space-between;
				font-size: 0.75rem;
				padding: 0.4rem 0.6rem;
				background: #020617;
			}

			#icons span {
				margin-left: 0.3rem;
			}

			/* ===== SCREENS ===== */
			.screen {
				display: none;
				height: calc(100% - 24px);
				padding: 1rem;
			}
			.screen.active {
				display: flex;
				flex-direction: column;
			}

			.lock {
				justify-content: space-between;
			}

			.time {
				font-size: 3rem;
				text-align: center;
				margin-top: 1rem;
			}

			/* ===== WIDGETS ===== */
			.widget {
				background: #0f172a;
				border-radius: 14px;
				padding: 0.6rem;
				margin-bottom: 0.5rem;
				font-size: 0.85rem;
			}

			/* ===== WEATHER ===== */
			#weather {
				text-align: center;
			}

			/* ===== NOTIFICATIONS ===== */
			.notification {
				background: #1e293b;
				border-radius: 16px;
				padding: 0.8rem;
				margin-bottom: 0.6rem;
				display: flex;
				gap: 0.6rem;
				cursor: pointer;
			}
			.icon {
				font-size: 1.8rem;
			}
			.notif-title {
				font-weight: bold;
			}

			/* ===== MESSAGE ===== */
			.message-box {
				background: #1e293b;
				border-radius: 16px;
				padding: 1rem;
				margin-top: 2rem;
			}

			.buttons button {
				width: 100%;
				margin-top: 0.5rem;
				padding: 0.6rem;
				border-radius: 12px;
				border: none;
				font-size: 1rem;
			}

			.danger {
				background: #dc2626;
				color: white;
			}
			.safe {
				background: #16a34a;
				color: white;
			}

			.bad {
				background: #7f1d1d;
			}
			.good {
				background: #064e3b;
			}

			.small {
				font-size: 0.8rem;
				opacity: 0.75;
			}

			/* ===== TOGGLE ===== */
			#langToggle {
				background: #334155;
				border: none;
				color: white;
				padding: 0.3rem 0.6rem;
				border-radius: 10px;
				font-size: 0.75rem;
				cursor: pointer;
			}

			.hidden {
				display: none;
			}
		</style>
	</head>

	<body>
		<div id="modal">
			<div id="phone">
				<!-- STATUS BAR -->
				<div id="status">
					<div id="carrier">ğŸ“¶ LTE</div>
					<div id="icons">
						<span>ğŸ“¡</span>
						<span id="battery">ğŸ”‹ 100%</span>
					</div>
				</div>

				<!-- LOCK SCREEN -->
				<div class="screen lock active" id="lock">
					<button id="langToggle">æ—¥æœ¬èª</button>
					<div class="time" id="clock">--:--</div>

					<div class="widget" id="weather">ğŸŒ¤ï¸ Loading weatherâ€¦</div>

					<div class="widget">
						<div id="nowPlaying" class="now-playing hidden">
							â–¶ï¸ <span id="nowPlayingLabel"></span>
							<span id="trackTitle"></span>
						</div>
						<iframe
							width="100%"
							height="90"
							src="https://www.youtube.com/embed/videoseries?list=PLdkj6XH8GYPSs9OiibXJHj5sNy8prTPJh&autoplay=1&mute=1"
							frameborder="0"
							allow="autoplay"
						></iframe>
					</div>

					<div id="notifications"></div>
					<div class="small" style="text-align: center">Tap a notification</div>
				</div>

				<div class="screen" id="message"></div>
				<div class="screen" id="result"></div>
			</div>
		</div>

		<audio
			id="notifSound"
			src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"
		></audio>

		<script>
			/* ===== UTIL ===== */
			const vibrate = () =>
				navigator.vibrate && navigator.vibrate([100, 50, 100]);
			const beep = () => document.getElementById("notifSound").play();

			/* ===== CLOCK ===== */
			setInterval(() => {
				const d = new Date();
				clock.textContent = `${String(d.getHours()).padStart(2, "0")}:${String(
					d.getMinutes()
				).padStart(2, "0")}`;
			}, 1000);

			/* ===== BATTERY ===== */
			let battery = 100;
			setInterval(() => {
				battery = Math.max(5, battery - 0.1);
				document.getElementById("battery").textContent = `ğŸ”‹ ${battery | 0}%`;
			}, 5000);

			/* ===== WEATHER ===== */
			let currentWeather = null;
			navigator.geolocation?.getCurrentPosition(
				(p) => {
					fetch(
						`https://api.open-meteo.com/v1/forecast?latitude=${p.coords.latitude}&longitude=${p.coords.longitude}&current=temperature_2m,windspeed_10m,precipitation,rain,showers,snowfall,weather_code&timezone=auto`
					)
						.then((r) => r.json())
						.then((d) => {
							currentWeather = d.current;
							renderWeather();
						})
						.catch(() => {
							weather.textContent = "ğŸŒ Weather unavailable";
						});
				},
				() => (weather.textContent = "ğŸŒ Location denied")
			);

			function renderWeather() {
				if (!currentWeather) return;

				const w = currentWeather;

				let conditionEN = "Clear";
				let conditionJA = "æ™´ã‚Œ";
				let icon = "â˜€ï¸";

				if (w.snowfall > 0) {
					icon = "â„ï¸";
					conditionEN = "Snow";
					conditionJA = "é›ª";
				} else if (w.showers > 0) {
					icon = "ğŸŒ¦ï¸";
					conditionEN = "Showers";
					conditionJA = "ã«ã‚ã‹é›¨";
				} else if (w.rain > 0) {
					icon = "ğŸŒ§ï¸";
					conditionEN = "Rain";
					conditionJA = "é›¨";
				} else if ([95, 96, 99].includes(w.weather_code)) {
					icon = "â›ˆï¸";
					conditionEN = "Storm";
					conditionJA = "é›·é›¨";
				}

				weather.textContent =
					`ğŸŒ¡ï¸ ${w.temperature_2m}Â°C  ` +
					`ğŸ’¨ ${w.windspeed_10m}km/h  ` +
					`${icon} ${t(conditionEN, conditionJA)}`;
			}

			/* ===== YOUTUBE PLAYLIST ===== */
			function renderNowPlaying() {
				nowPlaying.classList.remove("hidden");
				nowPlayingLabel.textContent = t("Now Playing:", "å†ç”Ÿä¸­ï¼š");
				trackTitle.textContent = t("", "");
			}

			/* ===== LANGUAGE ===== */
			let lang = "en";
			const toggle = document.getElementById("langToggle");

			const t = (en, ja) => (lang === "en" ? en : ja);

			toggle.onclick = () => {
				lang = lang === "en" ? "ja" : "en";
				toggle.textContent = lang === "en" ? "æ—¥æœ¬èª" : "English";
				loadNotifications();
				renderWeather();
				renderNowPlaying();
			};

			/* ===== GAME ===== */
			let stats = { total: 0, fail: 0, safe: 0 },
				current = null,
				queue = [];
			let scamPool = [
				/* ===== DELIVERY / SMS ===== */
				{
					icon: "ğŸ“¦",
					title: () => t("SMS: Delivery", "SMSï¼šé…é”"),
					text: () =>
						t(
							"Package could not be delivered.",
							"ãŠè·ç‰©ã‚’ãŠå±Šã‘ã§ãã¾ã›ã‚“ã§ã—ãŸ"
						),
					detail: () =>
						t(
							"Send us your address and phone number: http://bit.ly/wf8dor2h",
							"ä½æ‰€ã¨é›»è©±ç•ªå·ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š http://bit.ly/wf8dor2h"
						),
					action: () => t("Confirm", "ç¢ºèªã™ã‚‹"),
					result: () =>
						t(
							"Address and phone stolen. Don't click on shortlinks from people you don't know!",
							"ä½æ‰€ã¨é›»è©±ç•ªå·ãŒç›—ã¾ã‚Œã¾ã—ãŸã€‚è¦‹çŸ¥ã‚‰ã¬äººã‹ã‚‰ã®çŸ­ç¸®ãƒªãƒ³ã‚¯ã¯ã‚¯ãƒªãƒƒã‚¯ã—ãªã„ã§ãã ã•ã„ï¼"
						),
					scam: true,
				},
				{
					icon: "ğŸ“®",
					title: () => t("JP Post", "æ—¥æœ¬éƒµä¾¿"),
					text: () => t("Delivery rescheduled.", "å†é…é”ã®ãŠçŸ¥ã‚‰ã›"),
					detail: () =>
						t(
							"Click the link to arrange delivery: https://japanpost.jp.info/redeliver",
							"å†é…é”ã¯ã“ã¡ã‚‰ï¼š https://japanpost.jp.info/redeliver"
						),
					action: () => t("Open link", "ãƒªãƒ³ã‚¯ã‚’é–‹ã"),
					result: () =>
						t(
							"Login info stolen. Check the URL! Sometimes links look safe but go to fake sites.",
							"ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ãŒç›—ã¾ã‚Œã¾ã—ãŸã€‚URLã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼ æ™‚ã€…ãƒªãƒ³ã‚¯ã¯å®‰å…¨ã«è¦‹ãˆã¾ã™ãŒã€å½ã®ã‚µã‚¤ãƒˆã«ç§»å‹•ã—ã¾ã™ã€‚"
						),
					scam: true,
				},

				/* ===== AMAZON / SHOPPING ===== */
				{
					icon: "ğŸ›’",
					title: () => t("Amazon", "Amazon"),
					text: () =>
						t("Unusual login detected.", "ä¸å¯©ãªãƒ­ã‚°ã‚¤ãƒ³ã‚’æ¤œå‡ºã—ã¾ã—ãŸ"),
					detail: () =>
						t("Verify your account: https://amzon.jp/acount", "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç¢ºèª"),
					action: () => t("Verify", "ç¢ºèªã™ã‚‹ï¼š https://amzon.jp/acount"),
					result: () =>
						t(
							"Amazon credentials leaked. Check the URL! Many fake sites have misspelled URLs.",
							"Amazonã®èªè¨¼æƒ…å ±ãŒæµå‡ºã—ã¾ã—ãŸã€‚URLã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼ å¤šãã®å½ã®ã‚µã‚¤ãƒˆã¯ã‚¹ãƒšãƒ«ãƒŸã‚¹ã®URLã‚’æŒã£ã¦ã„ã¾ã™ã€‚"
						),
					scam: true,
				},
				{
					icon: "ğŸ",
					title: () => t("Rakuten", "æ¥½å¤©"),
					text: () =>
						t(
							"Your points will expire today.",
							"ãƒã‚¤ãƒ³ãƒˆã®æœ‰åŠ¹æœŸé™ãŒæœ¬æ—¥ã¾ã§ã§ã™"
						),
					detail: () =>
						t(
							"Use points now: https://rakuten.co.jp/points/redir.php?url=https://127.0.0.1",
							"ä»Šã™ãä½¿ã†ï¼š https://rakuten.co.jp/points/redir.php?url=https://127.0.0.1"
						),
					action: () => t("Open", "é–‹ã"),
					result: () =>
						t(
							"Account compromised. Sometimes scam URLs look like real URLs or go to real sites but then go to the scam site. Don't click on the link. Open your browser and enter the link in yourself.",
							"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä¹—ã£å–ã‚‰ã‚Œã¾ã—ãŸã€‚æ™‚ã€…è©æ¬ºã®URLã¯æœ¬ç‰©ã®ã‚µã‚¤ãƒˆã®ã‚ˆã†ã«è¦‹ãˆãŸã‚Šã€æœ¬ç‰©ã®ã‚µã‚¤ãƒˆã«ç§»å‹•ã—ãŸã‚Šã—ã¾ã™ãŒã€ãã®å¾Œè©æ¬ºã‚µã‚¤ãƒˆã«ç§»å‹•ã—ã¾ã™ã€‚ ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãªã„ã§ãã ã•ã„ã€‚ ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‹ãã€ãƒªãƒ³ã‚¯ã‚’è‡ªåˆ†ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"
						),
					scam: true,
				},

				/* ===== LINE / SOCIAL ===== */
				{
					icon: "ğŸ’¬",
					title: () => t("LINE: Tomo", "LINEï¼šã¨ã‚‚"),
					text: () => t("Is this you in this photo?", "ã“ã®å†™çœŸã‚ãªãŸï¼Ÿ"),
					detail: () => t("Send confirmation photo.", "ç¢ºèªç”¨ã®å†™çœŸé€ã£ã¦"),
					action: () => t("Send photo", "å†™çœŸã‚’é€ã‚‹"),
					result: () =>
						t(
							"Private photos leaked. Make sure it's really your friend you're talking to.",
							"å†™çœŸãŒæµå‡ºã—ã¾ã—ãŸã€‚æœ¬å½“ã«å‹é”ã¨è©±ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"
						),
					scam: true,
				},
				{
					icon: "ğŸ‘¤",
					title: () => t("LINE: New contact", "LINEï¼šæ–°ã—ã„é€£çµ¡å…ˆ"),
					text: () => t("Nice to meet you ğŸ˜Š", "ã¯ã˜ã‚ã¾ã—ã¦ğŸ˜Š"),
					detail: () => t("Can I see your face?", "é¡”å†™çœŸé€ã£ã¦ã‚‚ã„ã„ï¼Ÿ"),
					action: () => t("Send photo", "å†™çœŸã‚’é€ã‚‹"),
					result: () =>
						t(
							"Image used for impersonation. Don't sent pictures to people you don't know!",
							"ãªã‚Šã™ã¾ã—ã«ä½¿ã‚ã‚Œã¾ã—ãŸã€‚è¦‹çŸ¥ã‚‰ã¬äººã«å†™çœŸã‚’é€ã‚‰ãªã„ã§ãã ã•ã„ï¼"
						),
					scam: true,
				},
				{
					icon: "ğŸ’¬",
					title: () => t("LINE: Tomoha", "LINEï¼šã¨ã‚‚ã¯"),
					text: () => t("Send me your photo!", "å†™çœŸé€ã£ã¦ï¼"),
					detail: () =>
						t(
							"Send me the picture of you at the beach! I want to see it.",
							"ãƒ“ãƒ¼ãƒã§ã®å†™çœŸã‚’é€ã£ã¦ï¼ è¦‹ãŸã„ãªã€‚"
						),
					action: () => t("Send photo", "å†™çœŸã‚’é€ã‚‹"),
					result: () =>
						t(
							"Private photos leaked. Sometimes friends share your photos with other people. Don't send anything you can't show your mother!",
							"å†™çœŸãŒæµå‡ºã—ã¾ã—ãŸã€‚ æ™‚ã€…å‹é”ã¯ã‚ãªãŸã®å†™çœŸã‚’ä»–ã®äººã¨å…±æœ‰ã—ã¾ã™ã€‚ ãŠæ¯ã•ã‚“ã«è¦‹ã›ã‚‰ã‚Œãªã„ã‚‚ã®ã¯é€ã‚‰ãªã„ã§ãã ã•ã„ï¼"
						),
					scam: true,
				},

				/* ===== MONEY / GIFT CARD ===== */
				{
					icon: "ğŸ",
					title: () => t("It's me!", "ä¿ºã ã‚ˆï¼"),
					text: () => t("I need help ASAP!", "ä»Šã™ãåŠ©ã‘ã¦ï¼"),
					detail: () => t("Buy gift cards for me.", "ã‚®ãƒ•ãƒˆã‚«ãƒ¼ãƒ‰ã‚’è²·ã£ã¦"),
					action: () => t("Buy cards", "è³¼å…¥ã™ã‚‹"),
					result: () =>
						t(
							"Money lost. Don't buy gift cards if it's not for a gift.",
							"ãŠé‡‘ã‚’å¤±ã„ã¾ã—ãŸã€‚ã‚®ãƒ•ãƒˆä»¥å¤–ã§ã‚®ãƒ•ãƒˆã‚«ãƒ¼ãƒ‰ã‚’è³¼å…¥ã—ãªã„ã§ãã ã•ã„ã€‚"
						),
					scam: true,
				},
				{
					icon: "ğŸ’´",
					title: () => t("Part-time job", "ã‚¢ãƒ«ãƒã‚¤ãƒˆ"),
					text: () => t("Easy work, high pay.", "ç°¡å˜ä½œæ¥­ãƒ»é«˜åå…¥"),
					detail: () => t("Pay registration fee.", "ç™»éŒ²æ–™ãŒå¿…è¦ã§ã™"),
					action: () => t("Pay", "æ”¯æ‰•ã†"),
					result: () =>
						t(
							"Fee stolen. Be careful about jobs promising easy work and high pay. They might also be illegal jobs!",
							"ãŠé‡‘ã‚’ã ã¾ã—å–ã‚‰ã‚Œã¾ã—ãŸã€‚ç°¡å˜ãªä»•äº‹ã¨é«˜åå…¥ã‚’ç´„æŸã™ã‚‹ä»•äº‹ã«ã¯æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ é•æ³•ãªä»•äº‹ã§ã‚ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚Šã¾ã™ï¼"
						),
					scam: true,
				},

				/* ===== MY NUMBER / GOVERNMENT ===== */
				{
					icon: "ğŸªª",
					title: () => t("My Number", "ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰"),
					text: () =>
						t(
							"Your registration has an issue: https://my.number.info/error",
							"ç™»éŒ²æƒ…å ±ã«å•é¡ŒãŒã‚ã‚Šã¾ã™ï¼š https://my.number.info/error"
						),
					detail: () => t("Submit details now.", "æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"),
					action: () => t("Submit", "é€ä¿¡"),
					result: () =>
						t(
							"Personal ID stolen. Don't click on links for very private information! Open the official app or website by yourself.",
							"å€‹äººç•ªå·ãŒç›—ã¾ã‚Œã¾ã—ãŸã€‚éå¸¸ã«å€‹äººçš„ãªæƒ…å ±ã®ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãªã„ã§ãã ã•ã„ï¼ å…¬å¼ã‚¢ãƒ—ãƒªã‚„ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’è‡ªåˆ†ã§é–‹ã„ã¦ãã ã•ã„ã€‚"
						),
					scam: true,
				},
				{
					icon: "ğŸ›ï¸",
					title: () => t("Government", "è¡Œæ”¿"),
					text: () =>
						t(
							"You qualify for a refund. https://government.jp/23ofdsi3",
							"çµ¦ä»˜é‡‘ã®å¯¾è±¡ã§ã™ï¼š https://government.jp/23ofdsi3"
						),
					detail: () => t("Enter bank info.", "å£åº§æƒ…å ±ã‚’å…¥åŠ›"),
					action: () => t("Enter info", "å…¥åŠ›ã™ã‚‹"),
					result: () =>
						t(
							"Bank account drained. Always open official apps or websites. And be careful about messages promising money!",
							"å£åº§ã‹ã‚‰å¼•ãè½ã¨ã•ã‚Œã¾ã—ãŸã€‚å…¬å¼ã‚¢ãƒ—ãƒªã‚„ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’å¿…ãšé–‹ã„ã¦ãã ã•ã„ã€‚ãã—ã¦ã€ãŠé‡‘ã‚’ç´„æŸã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼"
						),
					scam: true,
				},

				/* ===== PAYMENTS / MOBILE ===== */
				{
					icon: "ğŸ“±",
					title: () => t("PayPay", "PayPay"),
					text: () =>
						t(
							"Suspicious activity detected: https://payapay.jp/account",
							"ä¸æ­£åˆ©ç”¨ã®å¯èƒ½æ€§ï¼š https://payapay.jp/account"
						),
					detail: () => t("Confirm identity.", "æœ¬äººç¢ºèª"),
					action: () => t("Confirm", "ç¢ºèª"),
					result: () =>
						t(
							"Wallet compromised. Open official websites or apps by yourself if you're worried about your money.",
							"ã‚¦ã‚©ãƒ¬ãƒƒãƒˆãŒä¸æ­£åˆ©ç”¨ã•ã‚Œã¾ã—ãŸã€‚ãŠé‡‘ãŒå¿ƒé…ãªå ´åˆã¯ã€å…¬å¼ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚„ã‚¢ãƒ—ãƒªã‚’è‡ªåˆ†ã§é–‹ã„ã¦ãã ã•ã„ã€‚"
						),
					scam: true,
				},
				{
					icon: "ğŸ“¶",
					title: () => t("AU Support", "AUã‚µãƒãƒ¼ãƒˆ"),
					text: () => t("Your service will stop.", "ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢äºˆå®š"),
					detail: () =>
						t(
							"Send payment now: https://au.au.au/send",
							"ä»Šã™ãæ”¯æ‰•ã†ï¼š https://au.au.au/send"
						),
					action: () => t("Send money", "é€é‡‘ã™ã‚‹"),
					result: () =>
						t(
							"Money lost. Never send money to a link!",
							"ãŠé‡‘ã‚’å¤±ã„ã¾ã—ãŸã€‚ãƒªãƒ³ã‚¯ã«ãŠé‡‘ã‚’é€ã‚‰ãªã„ã§ãã ã•ã„ï¼"
						),
					scam: true,
				},

				/* ===== EMAIL / HARD MODE ===== */
				{
					icon: "ğŸ“§",
					title: () => t("Security Team", "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£"),
					text: () =>
						t(
							"Password reset requested: https://officiallink.com/reset",
							"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´è¦æ±‚ï¼š https://officiallink.com/reset"
						),
					detail: () => t("Ignore if not you.", "å¿ƒå½“ãŸã‚ŠãŒãªã‘ã‚Œã°å¯¾å¿œ"),
					action: () => t("Reset password", "å¤‰æ›´ã™ã‚‹"),
					result: () =>
						t(
							"Account hijacked. Make sure you check and trust the link you click on!",
							"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä¹—ã£å–ã‚‰ã‚Œã¾ã—ãŸã€‚ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ãƒªãƒ³ã‚¯ã‚’ç¢ºèªã—ã¦ä¿¡é ¼ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼"
						),
					scam: true,
				},
				{
					icon: "ğŸ§ ",
					title: () => t("Classmate", "ã‚¯ãƒ©ã‚¹ãƒ¡ã‚¤ãƒˆ"),
					text: () => t("Teacher needs this urgently.", "å…ˆç”ŸãŒä»Šã™ãå¿…è¦"),
					detail: () => t("Send student list.", "åç°¿é€ã£ã¦"),
					action: () => t("Send", "é€ä¿¡"),
					result: () =>
						t(
							"Data leak occurred. Did you check that it was really your classmate?",
							"æƒ…å ±æ¼ãˆã„ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚æœ¬å½“ã«ã‚¯ãƒ©ã‚¹ãƒ¡ã‚¤ãƒˆã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ãŸã‹ï¼Ÿ"
						),
					scam: true,
				},

				/* ===== SAFE / NON-SCAM (for balance) ===== */
				{
					icon: "ğŸ¦",
					title: () => t("Bank App", "éŠ€è¡Œã‚¢ãƒ—ãƒª"),
					text: () => t("Monthly statement ready.", "åˆ©ç”¨æ˜ç´°ãŒå±Šãã¾ã—ãŸ"),
					detail: () =>
						t("Open your official bank app.", "å…¬å¼ã®éŠ€è¡Œã‚¢ãƒ—ãƒªã‚’é–‹ã"),
					action: () => t("Open app", "ã‚¢ãƒ—ãƒªã‚’é–‹ã"),
					result: () =>
						t(
							"Safe. Apps already on your smartphone are usually safe.",
							"ä»Šå›ã¯å®‰å…¨ã§ã—ãŸã€‚ ã‚¹ãƒãƒ›ã«å…¥ã£ã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã¯é€šå¸¸å®‰å…¨ã§ã™ã€‚"
						),
					scam: false,
				},
				{
					icon: "ğŸ“š",
					title: () => t("School", "å­¦æ ¡"),
					text: () => t("Tomorrow's schedule update.", "æ˜æ—¥ã®äºˆå®šå¤‰æ›´"),
					detail: () => t("Open email to see the notice.", "ãƒ¡ãƒ¼ãƒ«ã§ç¢ºèª"),
					action: () => t("View", "è¦‹ã‚‹"),
					result: () =>
						t(
							"Safe. If you trust the sender, it's usually safe. And it's usually OK to view a message. Just don't click any links you don't trust.",
							"ä»Šå›ã¯å®‰å…¨ã§ã—ãŸã€‚é€ä¿¡å…ˆã‚’ä¿¡é ¼ã—ã¦ã„ã‚‹å ´åˆã€é€šå¸¸ã¯å®‰å…¨ã§ã™ã€‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ã®ã¯é€šå¸¸å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚ä¿¡é ¼ã§ããªã„ãƒªãƒ³ã‚¯ã¯ã‚¯ãƒªãƒƒã‚¯ã—ãªã„ã§ãã ã•ã„ã€‚"
						),
					scam: false,
				},
			].sort(() => Math.random() - 0.5);

			/* ===== QUEUE ===== */
			function refill() {
				while (queue.length < 3 && scamPool.length)
					queue.push(scamPool.shift());
				if (queue.length === 0) {
					beep();
					vibrate();
				}
			}
			function loadNotifications() {
				refill();
				notifications.innerHTML = "";
				queue.forEach((n) => {
					const d = document.createElement("div");
					d.className = "notification";
					d.innerHTML = `<div class="icon" style="align: center; align-items: center;
				justify-content: center;">${
					n.icon
				}</div><div><div class="notif-title">${n.title()}</div><div>${n.text()}</div></div>`;
					d.onclick = () => openMsg(n);
					notifications.appendChild(d);
				});
			}

			/* ===== FLOW ===== */
			function openMsg(n) {
				current = n;
				stats.total++;
				show("message");
				message.innerHTML = `
 <div class="message-box">
  <h3>${n.icon} ${n.title()}</h3>
  <p>${n.text()}</p>
  <p class="small">${n.detail()}</p>
  <div class="buttons">
    <button class="danger" onclick="decide(true)">
  ${n.action()}
</button>
<button class="safe" onclick="decide(false)">
  ${t("Ignore", "ç„¡è¦–ã™ã‚‹")}
</button>
  </div>
 </div>`;
			}

			function fail() {
				stats.fail++;
				show("result");
				result.innerHTML = `<div class="message-box bad"><h3>âŒ</h3><p>${current.result()}</p><button onclick="next()" class="danger">OK</button></div>`;
			}
			/*function safe() {
				stats.safe++;
				show("result");
				result.innerHTML = `<div class="message-box good"><h3>âœ…</h3><p>${t(
					"You avoided the scam! You stayed safe.",
					"è©æ¬ºã‚’å›é¿ã—ã¾ã—ãŸï¼ å®‰å…¨ã§ã—ãŸã€‚"
				)}</p><p>${current.result()}</p><button onclick="next()" class="safe">OK</button></div>`;
			}*/

			function safe(messageText = null) {
				stats.safe++;
				show("result");
				result.innerHTML = `
    <div class="message-box good">
      <h3>âœ…</h3>
      <p>${
				messageText ?? t("You made a safe choice.", "å®‰å…¨ãªé¸æŠã§ã—ãŸã€‚")
			}</p>
      <p>${current.result()}</p>
      <button onclick="next()" class="safe">OK</button>
    </div>
  `;
			}

			function endGame() {
				show("result");
				result.innerHTML = `
    <div class="message-box good">
      <h3>ğŸ‰ ${t("Good job!", "ã‚ˆãã§ãã¾ã—ãŸï¼")}</h3>
      <p>${t(
				"You made it through all the messages.",
				"ã™ã¹ã¦ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèªã—ã¾ã—ãŸ"
			)}</p>

      <hr style="opacity:.3">

      <p>ğŸ“¬ ${t("Messages opened", "ç¢ºèªã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸")}: ${stats.total}</p>
      <p>âŒ ${t("Fell for scams", "ã ã¾ã•ã‚ŒãŸå›æ•°")}: ${stats.fail}</p>
      <p>âœ… ${t("Stayed safe", "å®‰å…¨ã ã£ãŸå›æ•°")}: ${stats.safe}</p>

      <p class="small">
        ${t(
					"Scams often look normal. Slowing down keeps you safe.",
					"è©æ¬ºã¯æ™®é€šã«è¦‹ãˆã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚è½ã¡ç€ãã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚"
				)}
      </p>

      <button class="safe" onclick="location.reload()">
        ${t("Play again", "ã‚‚ã†ä¸€åº¦")}
      </button>
    </div>
  `;
			}

			function next() {
				queue = queue.filter((x) => x !== current);
				current = null;

				if (queue.length === 0 && scamPool.length === 0) {
					endGame();
				} else {
					show("lock");
					loadNotifications();
				}
			}

			function show(id) {
				document
					.querySelectorAll(".screen")
					.forEach((s) => s.classList.remove("active"));
				document.getElementById(id).classList.add("active");
			}

			function decide(interacted) {
				/*
    interacted === true  â†’ clicked the action
    interacted === false â†’ ignored
  */

				if (current.scam) {
					if (interacted) {
						fail(); // fell for scam
					} else {
						safe(
							t(
								"Good choice! Ignoring prevented the scam.",
								"æ­£è§£ã§ã™ã€‚ç„¡è¦–ã—ãŸã“ã¨ã§è©æ¬ºã‚’é˜²ã’ã¾ã—ãŸã€‚"
							)
						);
					}
				} else {
					if (interacted) {
						safe(
							t(
								"This was a legitimate message. Using the official method was safe.",
								"æ­£è¦ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã—ãŸã€‚æ­£ã—ã„å¯¾å¿œã§ã™ã€‚"
							)
						);
					} else {
						show("result");
						result.innerHTML = `
        <div class="message-box neutral">
          <h3>â„¹ï¸</h3>
          <p>${current.result()}</p>
          <p class="small">
            ${t(
							"Ignoring this was not dangerous, but important messages can be missed.",
							"å±é™ºã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€å¤§äº‹ãªé€£çµ¡ã‚’è¦‹é€ƒã™ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚"
						)}
          </p>
          <button onclick="next()" class="safe">OK</button>
        </div>
      `;
					}
				}
			}

			loadNotifications();
			renderNowPlaying();
		</script>
	</body>
</html>
